{"version":3,"sources":["jugador.js"],"names":["cc","Class","extends","Component","properties","fondo","default","type","Node","serializable","velocidad","velocidadAngular","radioVacilacion","radioCentro","destino","anguloDestino","velocidadAngularDestino","velocidadDestinoX","velocidadDestinoY","distanciaPosicion","a","b","Math","sqrt","x","y","onLoad","self","node","position","rotationX","eventManager","addListener","event","EventListener","TOUCH_ONE_BY_ONE","swallowTouches","onTouchBegan","touch","getLocation","isNaN","rotation","anguloRad","atan2","PI","cos","sin","log","onTouchMoved","onTouchEnded","start","update","dt"],"mappings":"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","file":"jugador.js","sourceRoot":"..\\..\\..\\assets","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/class/index.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\t\r\n    properties: {\r\n        fondo: {\r\n             default: null, \r\n             type: cc.Node, \r\n             serializable: true,  \r\n         },\r\n\t\t velocidad: {\r\n\t\t\t default: 1.0,\r\n\t\t\t serializable: true,\r\n\t\t },\r\n\t\t velocidadAngular: {\r\n\t\t\t default: 1.0,\r\n\t\t\t serializable: true,\r\n\t\t },\r\n\t\t radioVacilacion:{\r\n\t\t\t default: 20.0,\r\n\t\t\t serializable: true,\r\n\t\t },\r\n\t\t radioCentro:{\r\n\t\t\t default:40,\r\n\t\t\t serializable: true,\r\n\t\t }\r\n    },\r\n\t\r\n\tdestino: null,\r\n\tanguloDestino: 0,\r\n\tvelocidadAngularDestino: 0,\r\n\t\r\n\tvelocidadDestinoX:0,\r\n\tvelocidadDestinoY:0,\r\n\t\r\n    // LIFE-CYCLE CALLBACKS:\r\n\tdistanciaPosicion (a, b){\r\n\t\treturn Math.sqrt((a.x-b.x)*(a.x-b.x) + (a.y-b.y)*(a.y-b.y));\r\n\t},\r\n\t\r\n    onLoad: function () {\r\n        var self = this;\r\n\t\t\r\n\t\tthis.destino = this.node.position;\r\n\t\tthis.anguloDestino = this.node.rotationX;\r\n\t\t\r\n        cc.eventManager.addListener({\r\n            event: cc.EventListener.TOUCH_ONE_BY_ONE,\r\n\t\t\tswallowTouches: false,\r\n            onTouchBegan: function (touch, event) {\t\r\n\t\t\t\t\r\n\t\t\t\tself.destino = touch.getLocation();\r\n\t\t\t\t\r\n\t\t\t\tif (isNaN(self.node.rotation))\r\n\t\t\t\t\tself.node.rotation = 0;\r\n\t\t\t\t\r\n\t\t\t\tself.node.rotation = self.node.rotationX % 360;\r\n\t\t\t\t\r\n\t\t\t\tvar anguloRad = Math.atan2(self.destino.y - self.fondo.y, self.destino.x - self.fondo.x);\r\n\t\t\t\t\r\n\t\t\t\tself.anguloDestino = anguloRad / Math.PI * 180;\r\n\t\t\t\t\r\n\t\t\t\tif (self.node.rotationX < self.anguloDestino)\r\n\t\t\t\t\tself.node.rotationX +=360;\r\n\t\t\t\t\r\n\t\t\t\tif (self.node.rotationX - self.anguloDestino>self.anguloDestino + 360 - self.node.rotationX)\r\n\t\t\t\t\tself.velocidadAngularDestino = self.velocidadAngular;\r\n\t\t\t\telse\r\n\t\t\t\t\tself.velocidadAngularDestino = -self.velocidadAngular;\r\n\t\t\t\t\r\n\t\t\t\tself.velocidadDestinoX = Math.cos(anguloRad) * self.velocidad;\r\n\t\t\t\tself.velocidadDestinoY = Math.sin(anguloRad) * self.velocidad;\r\n\t\t\t\t\r\n\t\t\t\tif (self.distanciaPosicion(self.destino, self.fondo.position) < self.radioCentro)\r\n\t\t\t\t\tself.velocidadAngularDestino = 0;\r\n\t\t\t\t\r\n\t\t\t\tcc.log(self.destino, self.anguloDestino, self.velocidadDestinoX, self.velocidadDestinoY);\r\n\t\t\t\t\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\t//Trigger when moving touch\r\n\t\t\tonTouchMoved: function (touch, event) {\t\r\n\r\n\t\t\t\tcc.log('onTouchMoved');\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t//Process the touch end event\r\n\t\t\tonTouchEnded: function (touch, event) {\r\n\r\n\t\t\t\tcc.log('onTouchEnded');\r\n\t\t\t\t\r\n\t\t\t}\r\n        }, self.node);\r\n    },\r\n\t\r\n    start () {\r\n\r\n    },\r\n\t\r\n\tupdate (dt){\r\n\t\t\r\n\t\tthis.node.rotation = this.node.rotationX + this.velocidadAngularDestino * dt;\r\n\t\t\r\n\t\tthis.node.position.x = 0.0 + this.node.position.x + this.velocidadDestinoX * dt;\r\n\t\tthis.node.position.y = 0.0 + this.node.position.y + this.velocidadDestinoY * dt;\r\n\t\t\r\n\t\tcc.log(this.velocidadAngularDestino);\r\n\t\tcc.log(this.velocidadDestinoY);\r\n\t\t\r\n\t},\r\n});\r\n"]}