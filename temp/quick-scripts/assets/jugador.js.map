{"version":3,"sources":["jugador.js"],"names":["cc","Class","extends","Component","properties","fondo","default","type","Node","serializable","velocidad","velocidadAngularMaxima","aceleracionAngular","radioOrbitacion","radioCentro","controlesActivos","destino","anguloDestino","distanciaDestino","distanciaAngularDestino","velocidadAngularDestino","aceleracionAngularDestino","deltaAnguloDesaceleracionDestino","velocidadDestinoX","velocidadDestinoY","orbitando","estadoActual","distanciaPosicion","a","b","Math","sqrt","x","y","onLoad","self","eventManager","addListener","event","EventListener","TOUCH_ONE_BY_ONE","swallowTouches","onTouchBegan","touch","isNaN","getLocation","node","rotation","position","rotationX","anguloRad","atan2","PI","diffA","distanciaAngular","abs","setEstado","anguloVelocidad","cos","sin","onTouchMoved","log","onTouchEnded","estado","setTimeout","getChildByName","active","getComponent","dragonBones","ArmatureDisplay","armature","animation","fadeIn","console","start","update","dt","DistanciaActual","random","setPosition"],"mappings":"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","file":"jugador.js","sourceRoot":"..\\..\\..\\assets","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/class/index.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\r\n\r\n\"use strict\";\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\t\r\n    properties: {\r\n        fondo: {\r\n             default: null, \r\n             type: cc.Node, \r\n             serializable: true,  \r\n         },\r\n\t\t velocidad: {\r\n\t\t\t default: 1.0,\r\n\t\t\t serializable: true,\r\n\t\t },\r\n\t\t velocidadAngularMaxima: {\r\n\t\t\t default: 1.0,\r\n\t\t\t serializable: true,\r\n\t\t },\r\n\t\t aceleracionAngular: {\r\n\t\t\t default: 1.0,\r\n\t\t\t serializable: true,\r\n\t\t },\r\n\t\t radioOrbitacion:{\r\n\t\t\t default: 20.0,\r\n\t\t\t serializable: true,\r\n\t\t },\r\n\t\t radioCentro:{\r\n\t\t\t default:40,\r\n\t\t\t serializable: true,\r\n\t\t },\r\n\t\t \r\n\t\t controlesActivos:{\r\n\t\t\t default:true,\r\n\t\t\t serializable: true,\r\n\t\t }\r\n    },\r\n\t\r\n\tdestino: null,\r\n\tanguloDestino: 0,\r\n\tdistanciaDestino: 0,\r\n\tdistanciaAngularDestino: 0,\r\n\tvelocidadAngularDestino: 0,\r\n\taceleracionAngularDestino:0,\r\n\tdeltaAnguloDesaceleracionDestino:0,\r\n\tvelocidadDestinoX:0,\r\n\tvelocidadDestinoY:0,\r\n\torbitando: false,\r\n\t\r\n\testadoActual: null,\r\n\t\r\n    // LIFE-CYCLE CALLBACKS:\r\n\tdistanciaPosicion (a, b){\r\n\t\treturn Math.sqrt((a.x-b.x)*(a.x-b.x) + (a.y-b.y)*(a.y-b.y));\r\n\t},\r\n\t\r\n    onLoad: function () {\r\n        var self = this;\r\n\t\t\r\n        cc.eventManager.addListener({\r\n            event: cc.EventListener.TOUCH_ONE_BY_ONE,\r\n\t\t\tswallowTouches: false,\r\n            onTouchBegan: function (touch, event) {\t\r\n\t\t\t\tif (self.controlesActivos)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (isNaN(self.velocidadAngularDestino) ) \r\n\t\t\t\t\t\tself.velocidadAngularDestino = 0;\r\n\t\t\t\t\t\r\n\t\t\t\t\tself.destino = touch.getLocation();\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (isNaN(self.node.rotation))\r\n\t\t\t\t\t\tself.node.rotation = 0;\r\n\t\t\t\t\t\r\n\t\t\t\t\t//self.node.rotation = (self.node.rotationX ) % 180;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (self.distanciaPosicion(self.fondo.position, self.destino) < self.radioCentro)\r\n\t\t\t\t\t\tself.anguloDestino = self.node.rotationX;\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// calcula el angulo contra la vertical x+\r\n\t\t\t\t\t\tvar anguloRad = Math.atan2(self.destino.y - self.fondo.position.y, self.destino.x - self.fondo.position.x);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tself.anguloDestino = (90 - anguloRad / Math.PI * 180);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// intento determinar hacia qué lado girar\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar diffA  = self.distanciaAngular(self.anguloDestino, self.node.rotationX);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (diffA > 0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tself.aceleracionAngularDestino = self.aceleracionAngular;\r\n\t\t\t\t\t\tself.deltaAnguloDesaceleracionDestino = Math.abs(diffA)/2;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tself.aceleracionAngularDestino = -self.aceleracionAngular;\r\n\t\t\t\t\t\tself.deltaAnguloDesaceleracionDestino = Math.abs(diffA)/2;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tself.distanciaAngularDestino = Math.abs(diffA);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (self.distanciaAngularDestino > 60)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tself.setEstado('giro');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tself.distanciaDestino = self.distanciaPosicion(self.node.position, self.destino);\r\n\t\t\t\t\tself.orbitando = false;\r\n\t\t\t\t\t\r\n\t\t\t\t\t// calcula el angulo contra la vertical x+\r\n\t\t\t\t\tvar anguloVelocidad = Math.atan2(self.destino.y - self.node.position.y, self.destino.x - self.node.position.x);\r\n\t\t\t\t\t\r\n\t\t\t\t\tself.velocidadDestinoX = Math.cos(anguloVelocidad) * self.velocidad;\r\n\t\t\t\t\tself.velocidadDestinoY = Math.sin(anguloVelocidad) * self.velocidad;\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\t//Trigger when moving touch\r\n\t\t\tonTouchMoved: function (touch, event) {\t\r\n\r\n\t\t\t\tcc.log('onTouchMoved');\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t//Process the touch end event\r\n\t\t\tonTouchEnded: function (touch, event) {\r\n\r\n\t\t\t\tcc.log('onTouchEnded');\r\n\t\t\t\t\r\n\t\t\t}\r\n        }, self.node);\r\n\t\t\r\n\t\tself.destino = self.node.position;\r\n\t\tself.anguloDestino = self.node.rotationX;\r\n\t\tself.orbitando = true;\r\n\t\tself.controlesActivos = true;\r\n\t\tself.velocidadDestinoX = 0;\r\n\t\tself.velocidadDestinoY = 0;\r\n\t\tself.velocidadAngularDestino = 0;\r\n\t\t\r\n\t\tself.estadoActual = '';\r\n\t\t\r\n    },\r\n\tsetEstado(estado){\r\n/*\r\n\t\tif (estado === 'estatico' && \r\n\t\t\t\tthis.fondo.getComponent('GameFlow')&& \r\n\t\t\t\tthis.fondo.getComponent('GameFlow').ColiderActivo &&\r\n\t\t\t\tthis.fondo.getComponent('GameFlow').ColiderActivo.enabled)\r\n\t\t\testado = 'tocar';\r\n\t\t*/\r\n\t\tvar self = this;\r\n\t\t\r\n\t\tswitch (estado){\r\n\t\t\tcase 'giro':\t\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tself.setEstado('estatico');\r\n\t\t\t\t}, 5750);\r\n\t\t\t\tbreak\r\n\t\t\tcase 'agarrar':\t\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tself.setEstado('estatico');\r\n\t\t\t\t}, 1500);\r\n\t\t\t\tbreak\r\n\t\t\tcase 'electrocutado':\t\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tself.setEstado('estatico');\r\n\t\t\t\t}, 2000);\r\n\t\t\t\tbreak\r\n\t\t\tdefault:\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tif (estado !== this.estadoActual)\r\n\t\t{\r\n\t\t\tif (this.node.getChildByName(this.estadoActual))\r\n\t\t\t\tthis.node.getChildByName(this.estadoActual).active = false;\r\n\t\t\r\n\t\t\tthis.estadoActual = estado;\r\n\t\t\t\r\n\t\t\tthis.node.getChildByName(estado).active = true;\r\n\t\t\t\r\n\t\t\t/*\r\n\t\t\tDragonBone.Animation.FadeIn(\r\n\t\t\tstring animationName, float fadeInTime = -1.0f, int playTimes = -1,\r\n\t\t\tint layer = 0, string group = null, AnimationFadeOutMode fadeOutMode = AnimationFadeOutMode.SameLayerAndGroup,\r\n\t\t\tbool additiveBlending = false, bool displayControl = true,\r\n\t\t\tbool pauseFadeOut = true, bool pauseFadeIn = true\r\n\t\t\t)\r\n\r\n\t\t\tSample:\r\n\t\t\tArmature.Animation.FadeIn(\"Shoot\", 0.05f, -1, 0); // a shooting animation that plays in loop (-1)\r\n\t\t\tArmature.Animation.FadeIn(\"Kick\", 0.025f, 0, 1); // while shooting, he also kicks in one round. Not sure if that 0 plays once though, but I hope you get my point :D\r\n\t\t\t*/\r\n\t\t\t\r\n\t\t\tthis.node.getChildByName(estado).getComponent(dragonBones.ArmatureDisplay).armature().animation.fadeIn(\"animtion0\", -1, -1, 0);\r\n\t\t\t\r\n\t\t\tconsole.log (this.node.getChildByName(estado));\r\n\t\t\t\r\n\t\t}\r\n\t},\r\n    start () {\r\n\t\tthis.setEstado('estatico');\r\n    },\r\n\tdistanciaAngular(a, b){\r\n\t\t\r\n\t\tvar diffA = (a - b) % 360;\r\n\t\t\r\n\t\tif (diffA < 0)\r\n\t\t\tdiffA = diffA + 360;\r\n\t\t\r\n\t\tif (diffA > 180)\r\n\t\t\tdiffA = diffA - 360;\r\n\t\t\r\n\t\treturn diffA;\r\n\t},\r\n\tupdate (dt){\r\n\t\tif (isNaN(this.velocidadAngularDestino) || isNaN(this.velocidadDestinoX) || isNaN(this.velocidadDestinoY))\r\n\t\t{\r\n\t\t\t\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tvar diffA = Math.abs(this.distanciaAngular(this.node.rotationX, this.anguloDestino));\r\n\t\t\t// a mitad de camino entre angulos, desacelero.\r\n\t\t\tif (diffA < this.deltaAnguloDesaceleracionDestino)\r\n\t\t\t{\r\n\t\t\t\tthis.aceleracionAngularDestino = -this.aceleracionAngularDestino;\r\n\t\t\t\tthis.deltaAnguloDesaceleracionDestino = -1;  // queda deshabilitado\r\n\t\t\t}\r\n\t\t\t// Mientras la distancia angular se esté achicando, sigo rotando, de lo contrario queda quieto.\r\n\t\t\tif (this.distanciaAngularDestino >= diffA)\r\n\t\t\t{\r\n\t\t\t\tthis.velocidadAngularDestino += this.aceleracionAngularDestino;\r\n\t\t\t\tthis.node.rotation = this.node.rotationX + this.velocidadAngularDestino * dt;\r\n\t\t\t\tthis.distanciaAngularDestino = diffA;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.aceleracionAngularDestino = 0;\r\n\t\t\t\tthis.velocidadAngularDestino = 0;\r\n\t\t\t\t//this.node.rotation = this.anguloDestino;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar DistanciaActual = this.distanciaPosicion(this.node.position, this.destino);\r\n\t\t\t\r\n\t\t\t//cc.log (DistanciaActual, this.distanciaDestino, this.orbitando);\r\n\t\t\t\r\n\t\t\tif (DistanciaActual <= this.distanciaDestino && this.orbitando !== true)\r\n\t\t\t\tthis.distanciaDestino = DistanciaActual;\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tif (this.orbitando !== true)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.velocidadDestinoX = 0;\r\n\t\t\t\t\tthis.velocidadDestinoY = 0;\r\n\t\t\t\t\tthis.orbitando = true;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (this.velocidadDestinoX > this.velocidadDestinoY)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.velocidadDestinoX = this.velocidadDestinoY;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.velocidadDestinoY = this.velocidadDestinoX;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.velocidadDestinoX = this.velocidadDestinoX *.5 + (this.destino.x - this.node.position.x)*.5 + this.radioOrbitacion * (Math.random() -.5);\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\tthis.velocidadDestinoY = this.velocidadDestinoY *.5 + (this.destino.y - this.node.position.y)*.5 + this.radioOrbitacion * (Math.random() -.5);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.node.setPosition(this.node.position.x + this.velocidadDestinoX * dt, this.node.position.y + this.velocidadDestinoY * dt);\r\n\t\t\t\r\n\t\t}\r\n\t},\r\n});\r\n"]}