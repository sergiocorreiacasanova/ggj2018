{"version":3,"sources":["..\\..\\..\\assets/assets\\jugador.js"],"names":["cc","Class","extends","Component","properties","fondo","default","type","Node","serializable","velocidad","velocidadAngularMaxima","aceleracionAngular","radioOrbitacion","radioCentro","controlesActivos","destino","anguloDestino","distanciaDestino","velocidadAngularDestino","aceleracionAngularDestino","deltaAnguloDesaceleracionDestino","velocidadDestinoX","velocidadDestinoY","orbitando","estadoActual","distanciaPosicion","a","b","Math","sqrt","x","y","onLoad","self","eventManager","addListener","event","EventListener","TOUCH_ONE_BY_ONE","swallowTouches","onTouchBegan","touch","isNaN","getLocation","node","rotation","rotationX","position","anguloRad","PI","atan2","diffA","abs","setEstado","setTimeout","anguloVelocidad","cos","sin","onTouchMoved","log","onTouchEnded","estado","getChildByName","active","console","start","update","dt","DistanciaActual","random","setPosition"],"mappings":"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","file":"jugador.js","sourceRoot":"..\\..\\..\\assets","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/class/index.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\r\n\r\n\"use strict\";\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\t\r\n    properties: {\r\n        fondo: {\r\n             default: null, \r\n             type: cc.Node, \r\n             serializable: true,  \r\n         },\r\n\t\t velocidad: {\r\n\t\t\t default: 1.0,\r\n\t\t\t serializable: true,\r\n\t\t },\r\n\t\t velocidadAngularMaxima: {\r\n\t\t\t default: 1.0,\r\n\t\t\t serializable: true,\r\n\t\t },\r\n\t\t aceleracionAngular: {\r\n\t\t\t default: 1.0,\r\n\t\t\t serializable: true,\r\n\t\t },\r\n\t\t radioOrbitacion:{\r\n\t\t\t default: 20.0,\r\n\t\t\t serializable: true,\r\n\t\t },\r\n\t\t radioCentro:{\r\n\t\t\t default:40,\r\n\t\t\t serializable: true,\r\n\t\t },\r\n\t\t \r\n\t\t controlesActivos:{\r\n\t\t\t default:true,\r\n\t\t\t serializable: true,\r\n\t\t }\r\n    },\r\n\t\r\n\tdestino: null,\r\n\tanguloDestino: 0,\r\n\tdistanciaDestino: 0,\r\n\tvelocidadAngularDestino: 0,\r\n\taceleracionAngularDestino:0,\r\n\tdeltaAnguloDesaceleracionDestino:0,\r\n\tvelocidadDestinoX:0,\r\n\tvelocidadDestinoY:0,\r\n\torbitando: false,\r\n\t\r\n\testadoActual: null,\r\n\t\r\n    // LIFE-CYCLE CALLBACKS:\r\n\tdistanciaPosicion (a, b){\r\n\t\treturn Math.sqrt((a.x-b.x)*(a.x-b.x) + (a.y-b.y)*(a.y-b.y));\r\n\t},\r\n\t\r\n    onLoad: function () {\r\n        var self = this;\r\n\t\t\r\n        cc.eventManager.addListener({\r\n            event: cc.EventListener.TOUCH_ONE_BY_ONE,\r\n\t\t\tswallowTouches: false,\r\n            onTouchBegan: function (touch, event) {\t\r\n\t\t\t\tif (self.controlesActivos)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (isNaN(self.velocidadAngularDestino) ) \r\n\t\t\t\t\t\tself.velocidadAngularDestino = 0;\r\n\t\t\t\t\t\r\n\t\t\t\t\tself.destino = touch.getLocation();\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (isNaN(self.node.rotation))\r\n\t\t\t\t\t\tself.node.rotation = 0;\r\n\t\t\t\t\t\r\n\t\t\t\t\tself.node.rotation = (self.node.rotationX +360) % 360;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (self.distanciaPosicion(self.fondo.position, self.destino) < self.radioCentro)\r\n\t\t\t\t\t\tself.anguloDestino = self.node.rotationX;\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// calcula el angulo contra la vertical x+\r\n\t\t\t\t\t\tvar anguloRad = (Math.PI/2 - Math.atan2(self.destino.y - self.fondo.position.y, self.destino.x - self.fondo.position.x) + Math.PI*2) % (Math.PI*2);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tself.anguloDestino = anguloRad / Math.PI * 180;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// intento determinar hacia quÃ© lado girar\r\n\t\t\t\t\t/*\r\n\t\t\t\t\t\tEj 1 \r\n\t\t\t\t\t\tdestino = 270\r\n\t\t\t\t\t\tnodo = 30\r\n\t\t\t\t\t\tdestino - nodo >180 -> gira contrareloj\r\n\t\t\t\t\t\tEj 2\r\n\t\t\t\t\t\tDestino = 30\r\n\t\t\t\t\t\tnodo = 270\r\n\t\t\t\t\t\tDestino - nodo < -180 - gira reloj\r\n\t\t\t\t\t*/\r\n\t\t\t\t\tvar diffA = ((self.anguloDestino + 180) - (self.node.rotationX + 180)) % 180; \r\n\r\n\t\t\t\t\tif (diffA > 0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tself.aceleracionAngularDestino = self.aceleracionAngular;\r\n\t\t\t\t\t\tself.deltaAnguloDesaceleracionDestino = Math.abs(diffA)/2;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tself.aceleracionAngularDestino = -self.aceleracionAngular;\r\n\t\t\t\t\t\tself.deltaAnguloDesaceleracionDestino = Math.abs(diffA)/2;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (Math.abs(diffA) > 60)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tself.setEstado('giro');\r\n\t\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t\tself.setEstado('estatico');\r\n\t\t\t\t\t\t}, 5000);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tself.distanciaDestino = self.distanciaPosicion(self.node.position, self.destino);\r\n\t\t\t\t\tself.orbitando = false;\r\n\t\t\t\t\t\r\n\t\t\t\t\t// calcula el angulo contra la vertical x+\r\n\t\t\t\t\tvar anguloVelocidad = Math.atan2(self.destino.y - self.node.position.y, self.destino.x - self.node.position.x);\r\n\t\t\t\t\t\r\n\t\t\t\t\tself.velocidadDestinoX = Math.cos(anguloVelocidad) * self.velocidad;\r\n\t\t\t\t\tself.velocidadDestinoY = Math.sin(anguloVelocidad) * self.velocidad;\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\t//Trigger when moving touch\r\n\t\t\tonTouchMoved: function (touch, event) {\t\r\n\r\n\t\t\t\tcc.log('onTouchMoved');\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t//Process the touch end event\r\n\t\t\tonTouchEnded: function (touch, event) {\r\n\r\n\t\t\t\tcc.log('onTouchEnded');\r\n\t\t\t\t\r\n\t\t\t}\r\n        }, self.node);\r\n\t\t\r\n\t\tself.destino = self.node.position;\r\n\t\tself.anguloDestino = self.node.rotationX;\r\n\t\tself.orbitando = true;\r\n\t\tself.controlesActivos = true;\r\n\t\tself.velocidadDestinoX = 0;\r\n\t\tself.velocidadDestinoY = 0;\r\n\t\tself.velocidadAngularDestino = 0;\r\n\t\t\r\n\t\tself.estadoActual = '';\r\n\t\t\r\n    },\r\n\tsetEstado(estado){\r\n\r\n\t\tif (estado !== this.estadoActual)\r\n\t\t{\r\n\t\t\tif (this.node.getChildByName(this.estadoActual))\r\n\t\t\t\tthis.node.getChildByName(this.estadoActual).active = false;\r\n\t\t\r\n\t\t\tthis.estadoActual = estado;\r\n\t\t\t\r\n\t\t\tthis.node.getChildByName(estado).active = true;\r\n\t\t\t\r\n\t\t\tconsole.log (this.node.getChildByName(estado));\r\n\t\t\t\r\n\t\t}\r\n\t},\r\n    start () {\r\n\t\tthis.setEstado('estatico');\r\n    },\r\n\t\r\n\tupdate (dt){\r\n\t\tif (isNaN(this.velocidadAngularDestino) || isNaN(this.velocidadDestinoX) || isNaN(this.velocidadDestinoY))\r\n\t\t{\r\n\t\t\t\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tif (Math.abs(((this.node.rotationX + 360) % 360 + 360) % 540 - ((this.anguloDestino + 360)% 360 + 360) % 540)  < this.deltaAnguloDesaceleracionDestino)\r\n\t\t\t{\r\n\t\t\t\tthis.aceleracionAngularDestino = -this.aceleracionAngularDestino;\r\n\t\t\t\tthis.deltaAnguloDesaceleracionDestino = -1;  // queda deshabilitado\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.velocidadAngularDestino += this.aceleracionAngularDestino;\r\n\t\t\t\r\n\t\t\tif (Math.abs((this.node.rotation + 360) % 540 - (this.anguloDestino + 360) % 540) < 5)\r\n\t\t\t{\r\n\t\t\t\tthis.aceleracionAngularDestino = 0;\r\n\t\t\t\tthis.velocidadAngularDestino = 0;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.node.rotation = this.node.rotationX + this.velocidadAngularDestino * dt;\r\n\t\t\t\r\n\t\t\tvar DistanciaActual = this.distanciaPosicion(this.node.position, this.destino);\r\n\t\t\t\r\n\t\t\t//cc.log (DistanciaActual, this.distanciaDestino, this.orbitando);\r\n\t\t\t\r\n\t\t\tif (DistanciaActual <= this.distanciaDestino && this.orbitando !== true)\r\n\t\t\t\tthis.distanciaDestino = DistanciaActual;\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tif (this.orbitando !== true)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.velocidadDestinoX = 0;\r\n\t\t\t\t\tthis.velocidadDestinoY = 0;\r\n\t\t\t\t\tthis.orbitando = true;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (this.velocidadDestinoX > this.velocidadDestinoY)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.velocidadDestinoX = this.velocidadDestinoY;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.velocidadDestinoY = this.velocidadDestinoX;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.velocidadDestinoX = this.velocidadDestinoX *.5 + (this.destino.x - this.node.position.x)*.5 + this.radioOrbitacion * (Math.random() -.5);\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\tthis.velocidadDestinoY = this.velocidadDestinoY *.5 + (this.destino.y - this.node.position.y)*.5 + this.radioOrbitacion * (Math.random() -.5);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.node.setPosition(this.node.position.x + this.velocidadDestinoX * dt, this.node.position.y + this.velocidadDestinoY * dt);\r\n\t\t\t\r\n\t\t}\r\n\t},\r\n});\r\n"]}